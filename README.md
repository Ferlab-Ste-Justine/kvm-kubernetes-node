# About

This package provisions a node (master or worker) that you can install kubernetes on (validated with Kubespray)

The implementation is currently quite minimalistic and beyond enable ipv4 forwarding, don't really do any kubernetes-specific setup.

# Usage

## Input

The module takes the following variables as input:

- **name**: Name of the load balancer vm
- **vcpus**: Number of vcpus to assign to the load balancer. Defaults to 2.
- **memory**: Amount of memory to assign to the bastion in MiB. Defaults to 8192 (8 GiB).
- **volume_id**: Id of the disk volume to attach to the vm
- **network_id**: Id of the libvirt network to connect the vm to if you plan on connecting the vm to a libvirt network
- **macvtap_interface**: Interface that you plan to connect your vm to via a lower macvtap interface. Note that either this or network_id should be set, but not both.
- **macvtap_vm_interface_name_match**: Expected pattern of the network interface name in the vm. Defaults to "en*". Used with macvtap only.
- **macvtap_subnet_prefix_length**: Length of the subnet prefix (ie, the yy in xxx.xxx.xxx.xxx/yy) in the host network. Used with macvtap only.
- **macvtap_gateway_ip**: Ip of the host network's gateway. Used with macvtap only.
- **macvtap_dns_servers**: Ip of dns servers that the vm should explicitly use, useful mostly during the initial cloud-init bootstraping to resolve domain of installables. Used for macvtap only.
- **ip**: Ip of the vm on whichever network it is connected. Note that this isn't an optional parameter. Dhcp cannot be used.
- **mac**: Mac address of the vm. If none is passed, a random one will be generated.
- **cloud_init_volume_pool**: Name of the volume pool that will contain the cloud-init volume of the vm.
- **cloud_init_volume_name**: Name of the cloud-init volume that will be generated by the module for your vm. If left empty, it will default to ``<vm name>-cloud-init.iso``.
- **ssh_admin_user**: Username of the default sudo user in the image. Defaults to **ubuntu**.
- **admin_user_password**: Optional password for the default sudo user of the image. Note that this will not enable ssh password connections, but it will allow you to log into the vm from the host using the **virsh console** command.
- **ssh_admin_public_key**: Public part of the ssh key that will be used to login as the admin on the vm